# セット麻雀特化 - 機能アイデア

**作成日**: 2025-11-16
**ステータス**: アイデア段階（詳細設計前）

---

## 🎯 基本方針

- **ターゲット**: フリー雀荘ではなく、セット麻雀（仲間内での麻雀）に特化
- **差別化**: グループ機能、エンタメ性、簡単な清算

---

## 💡 新機能アイデア

### 1. テンプレート機能

**概要**:
- 新規セッション開始時に、ユーザーが作成したテンプレートを選択可能
- 現在: 4人打ち / 3人打ちの2択
- 改善後: 4人打ち / 3人打ち / **ユーザーテンプレート**

**想定ユースケース**:
- 「金曜麻雀会」テンプレート
  - メンバー: Aさん、Bさん、Cさん、Dさん（固定）
  - レート: 30
  - ウマ: 10
  - チップレート: 100
  - ウマルール: 標準ルール
- 「月イチ麻雀」テンプレート
  - メンバー: 異なる固定メンバー
  - レート: 50（高レート）

**機能要素**:
- テンプレート作成
- テンプレート編集
- テンプレート削除
- テンプレート選択（新規セッション開始時）
- テンプレートから設定を引き継ぎ

**テンプレート作成の入り口**:
1. **設定タブから新規作成**
   - 空のテンプレートを作成し、一から設定
   - テンプレート名、メンバー、レート等を手動設定

2. **履歴タブから既存セッションを保存**
   - 過去のセッション詳細ダイアログから「テンプレート保存」ボタン
   - セッションの設定（メンバー、レート、ウマ等）をそのままテンプレート化
   - 「金曜麻雀会 2025-11-15」→「金曜麻雀会」テンプレートに保存

3. **入力タブから入力中の設定を保存**
   - セッション入力画面から「テンプレート保存」ボタン
   - 現在選択中のメンバー、レート等をテンプレートとして保存
   - 入力途中でも保存可能（点数データは保存しない）

**メリット**:
- 入力の高速化（毎回同じ設定を入力する手間削減）
- ミスの削減（レート設定間違い等）
- 定例メンバーでの記録が簡単

---

### 2. セッション一言メモ機能

**概要**:
- 各セッションに一言メモを追加できる機能

**想定ユースケース**:
- 「Aさんが役満達成！」
- 「今日は調子が良かった」
- 「次回は来週土曜日」
- 「新メンバーのBさん初参加」

**機能要素**:
- メモの追加（入力時 or 後から編集）
- メモの編集
- メモの削除
- 履歴タブでメモ表示
- セッション詳細ダイアログでメモ表示

**メリット**:
- セッションの記憶を残せる
- 思い出を振り返れる
- グループ共有時に会話のきっかけ
- 「あの時の半荘」を探しやすい

---

### 3. 精算タブ（出納帳機能）

**概要**:
- 原則: セッション終了時にその場で精算済み
- 例外: 未精算の場合のみ記録・編集可能
- プレイヤーごとの未精算残高を管理

**基本方針**:
```
通常ケース（95%）:
  セッション終了 → その場で現金精算 → 精算タブに記録なし

例外ケース（5%）:
  セッション終了 → 現金なし・立て替え → 精算タブに未精算として記録
```

**想定画面イメージ**:
```
┌─────────────────────────────────────┐
│ 精算タブ                             │
├─────────────────────────────────────┤
│ 📊 未精算なし                        │
│                                     │
│ [未精算を追加]                       │
└─────────────────────────────────────┘

（未精算がある場合）
┌─────────────────────────────────────┐
│ 精算タブ                             │
├─────────────────────────────────────┤
│ Aさん: -3,000円                      │
│   └ 11/10 金曜麻雀会 (-3,000円)     │
│   [精算完了]                         │
│                                     │
│ [未精算を追加]                       │
└─────────────────────────────────────┘
```

**想定ユースケース**:

1. **通常ケース（その場で精算）**:
   - セッション終了: Aさん-5,000円、Bさん+3,000円、Cさん+2,000円
   - その場でAさんがBさんとCさんに現金で支払い
   - 精算タブには何も記録されない（デフォルト）

2. **例外ケース（未精算が発生）**:
   - セッション終了: Aさん-3,000円（現金なし）
   - 精算タブに手動で「Aさん -3,000円 未精算」を追加
   - 次回打つ時に精算 → [精算完了]ボタンで削除

3. **建て替えケース**:
   - Bさんが場代をAさんの分も立て替え
   - 精算タブに「Aさん -500円（場代立て替え by Bさん）」を追加
   - 後日精算

**機能要素**:
- 未精算リスト表示（プレイヤーごと）
- 未精算の手動追加・編集・削除
- セッションとの紐付け（どのセッションの未精算か）
- 精算完了ボタン（未精算を削除）
- 精算履歴（過去の清算記録）

**メリット**:
- 通常は何も表示されない（シンプル）
- 例外的な未精算のみ管理
- 金銭トラブル防止
- 忘れ防止

**実装場所**:
- 独立した「精算タブ」として実装（入力・履歴・分析・設定と同列）

---

### 4. 履歴タブのUI改善

**概要**:
- 現在の履歴タブの使いやすさを改善

**改善点**:
- **セッション詳細ダイアログでの合計表示**
  - 現状: 各半荘の点数は表示されるが、合計が表示されない
  - 改善後: 各プレイヤーの合計点数を表示
  - 表示内容:
    - 総収支（円）
    - 総ポイント（pt）
    - チップ合計（枚）
    - 場代合計（円）

**メリット**:
- セッション詳細を見るだけで結果が分かる
- 一覧画面に戻らずに確認可能
- 清算時の確認に便利

---

## 📊 競合分析から見えたニーズ

### セット麻雀ユーザーの特性
- 固定メンバー（4-8人程度）
- 定期開催（毎週、月1回など）
- 金銭のやり取りあり（清算の正確性重要）
- 長期的な関係性（仲間内ランキング）
- エンタメ要素（楽しみたい）

### 他アプリとの差別化ポイント

**雀ログ**:
- 機能: グラフ/カレンダー表示
- 差別化: より多くの価値提供（グループ機能、テンプレート等）

**雀簿（Janbo）**:
- 機能: CSV出力、友達通知
- 差別化: セット麻雀に特化したソーシャル機能（仲間内での記録共有）

---

## 🚀 今後の機能展開（優先順位順）

### Phase 1: 無料版の完成度向上
1. 履歴タブのUI改善（セッション詳細ダイアログに合計表示） ← **NEW** - 優先度高
2. 精算タブ（出納帳機能） ← **NEW** - 独立したタブとして実装
3. テンプレート機能 ← **NEW**
4. セッション一言メモ機能 ← **NEW**
5. プレイヤー管理の強化
6. 入力の高速化（前回設定引き継ぎ）

### Phase 2: 分析機能
1. 基本分析タブ
   - 着順統計
   - 収支統計
   - ポイント統計
   - チップ統計
2. 時系列グラフ
3. ランキング機能
4. データバックアップ

### Phase 3: グループ機能
1. グループ機能（最大8名）
2. リアルタイム共有
3. グループランキング
4. 清算サマリー自動計算
5. 定例設定（テンプレート機能の強化版）
6. 称号・バッジシステム

---

## 📝 次のステップ

- [ ] 履歴タブUI改善の実装（優先度高 - すぐ実装可能）
- [ ] 精算タブの詳細設計
  - データモデル（PlayerBalance、Settlement）
  - UI/UX設計（タブレイアウト、清算フロー）
  - セッションデータとの連携方法
- [ ] テンプレート機能の詳細設計
- [ ] セッション一言メモ機能の詳細設計
- [ ] 既存のInputTabへの組み込み方検討
- [ ] データモデル設計（Template、SessionMemo）
- [ ] UI/UX設計

---

**更新履歴**:
- 2025-11-16 15:20: テンプレート作成の入り口（設定タブ、履歴、入力中）を明記
- 2025-11-16 15:15: 精算タブ（出納帳機能）の構想を整理、収益モデル関連の記述削除
- 2025-11-16 15:08: 履歴タブUI改善（セッション詳細ダイアログに合計表示）アイデア追加
- 2025-11-16 15:05: 支払い・ツケ・建て替え計算機能アイデア追加
- 2025-11-16 15:00: 初回作成、テンプレート機能・一言メモ機能アイデア追加
