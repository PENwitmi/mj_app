# ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

**Date**: 2025-11-05 18:40
**Document Type**: Test Strategy
**Priority**: Critical
**Related Documents**:
- `02-DESIGN_SPECIFICATION.md` (è¨­è¨ˆä»•æ§˜)
- `03-IMPLEMENTATION_PLAN.md` (å®Ÿè£…è¨ˆç”»)

---

## ğŸ“‹ ç›®æ¬¡

1. [ãƒ†ã‚¹ãƒˆæ–¹é‡](#ãƒ†ã‚¹ãƒˆæ–¹é‡)
2. [Phase 1: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ](#phase-1-ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ)
3. [Phase 2: selectedUserIdãƒ†ã‚¹ãƒˆ](#phase-2-selecteduseridãƒ†ã‚¹ãƒˆ)
4. [å›å¸°ãƒ†ã‚¹ãƒˆ](#å›å¸°ãƒ†ã‚¹ãƒˆ)
5. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ)
6. [ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãƒãƒˆãƒªãƒƒã‚¯ã‚¹](#ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãƒãƒˆãƒªãƒƒã‚¯ã‚¹)

---

## ãƒ†ã‚¹ãƒˆæ–¹é‡

### ç›®çš„

**Phase 1**: 0ç‚¹ï¼ˆscore === 0ï¼‰ãŒæ­£ã—ãçµ±è¨ˆã«å«ã¾ã‚Œã‚‹ã“ã¨ã‚’æ¤œè¨¼

**Phase 2**: selectedUserIdã«ã‚ˆã‚‹å‹•çš„ãªçµ±è¨ˆè¨ˆç®—ã‚’æ¤œè¨¼

### ãƒ†ã‚¹ãƒˆéšå±¤

```
Level 1: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆé–¢æ•°å˜ä½“ï¼‰
  â†“
Level 2: çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆï¼‰
  â†“
Level 3: E2Eãƒ†ã‚¹ãƒˆï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œï¼‰
  â†“
Level 4: å›å¸°ãƒ†ã‚¹ãƒˆï¼ˆæ—¢å­˜æ©Ÿèƒ½ï¼‰
```

### ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«

**ç¾åœ¨åˆ©ç”¨å¯èƒ½**:
- Vitestï¼ˆãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼‰
- Playwrightï¼ˆE2Eãƒ†ã‚¹ãƒˆï¼‰

**æ¨å¥¨**:
- Phase 1: æ‰‹å‹•ãƒ†ã‚¹ãƒˆ + E2Eãƒ†ã‚¹ãƒˆ
- Phase 2: æ‰‹å‹•ãƒ†ã‚¹ãƒˆ + E2Eãƒ†ã‚¹ãƒˆ
- å›å¸°ãƒ†ã‚¹ãƒˆ: E2Eãƒ†ã‚¹ãƒˆ

---

## Phase 1: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆç›®çš„

0ç‚¹ï¼ˆscore === 0ï¼‰ãŒæ­£ã—ãå‡¦ç†ã•ã‚Œã‚‹ã“ã¨ã‚’æ¤œè¨¼

**ä¿®æ­£å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**:
- session-utils.ts: Line 142, 203
- InputTab.tsx: Line 260
- AnalysisTab.tsx: Line 135
- **analysis.ts: Line 130, 142ï¼ˆå¤–éƒ¨AIãƒ¬ãƒ“ãƒ¥ãƒ¼ã§è¿½åŠ ï¼‰**

**æ¤œè¨¼ã™ã‚‹é–¢æ•°**:
- `calculateSessionSummary`ï¼ˆsession-utils.tsï¼‰
- `isEmptyHanchan`ï¼ˆInputTab.tsxï¼‰
- `pointStats`è¨ˆç®—ï¼ˆAnalysisTab.tsxï¼‰
- **`calculateRankStatistics`ï¼ˆanalysis.tsï¼‰** âš ï¸ è¿½åŠ 

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: å˜ä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»0ç‚¹åŠè˜

**ãƒ†ã‚¹ãƒˆID**: EDGE-001

**å‰ææ¡ä»¶**:
- ç©ºã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆæœŸåŒ–æ¸ˆã¿

**ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿**:
```
ã‚»ãƒƒã‚·ãƒ§ãƒ³:
  æ—¥ä»˜: 2025-11-05
  ãƒ¢ãƒ¼ãƒ‰: 4äººæ‰“ã¡
  ãƒ¬ãƒ¼ãƒˆ: 30pt
  ã‚¦ãƒ: 10pt/å€‹
  ãƒãƒƒãƒ—ãƒ¬ãƒ¼ãƒˆ: 100pt/æš
  å ´ä»£: 500pt

åŠè˜1:
  ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼: Â±0ç‚¹, ã‚¦ãƒ: "", ãƒãƒƒãƒ—: 0æš, å ´ä»£: 500pt
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B: +5000ç‚¹, ã‚¦ãƒ: "â—‹â—‹", ãƒãƒƒãƒ—: 0æš, å ´ä»£: 500pt
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C: -2500ç‚¹, ã‚¦ãƒ: "â—‹", ãƒãƒƒãƒ—: 0æš, å ´ä»£: 500pt
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D: -2500ç‚¹, ã‚¦ãƒ: "âœ—", ãƒãƒƒãƒ—: 0æš, å ´ä»£: 500pt
```

**æ“ä½œæ‰‹é †**:
1. æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ä¸Šè¨˜ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›
2. ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¿å­˜
3. å±¥æ­´ã‚¿ãƒ–ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³è©³ç´°ã‚’é–‹ã
4. åˆ†æã‚¿ãƒ–ã§ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠ

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:

**å±¥æ­´ã‚¿ãƒ–**:
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒä¿å­˜ã•ã‚Œã‚‹
- [ ] åŠè˜æ•°: 1åŠè˜
- [ ] ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åæ”¯: -500ptï¼ˆÂ±0ç‚¹ * 30 + 0 * 100 - 500ï¼‰
- [ ] ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç€é †: 4ä½ï¼ˆÂ±0ç‚¹ã¯æœ€ä¸‹ä½ï¼‰

**åˆ†æã‚¿ãƒ–**:
- [ ] revenueStats.totalBalance: -500pt
- [ ] revenueStats.totalIncome: 0pt
- [ ] revenueStats.totalExpense: -500ptï¼ˆå ´ä»£ã®ã¿ï¼‰
- [ ] pointStats.pointBalance: 0ç‚¹
- [ ] chipStats.chipBalance: 0æš
- [ ] **rankStats.hanchanCount: 1** âš ï¸ analysis.tsä¿®æ­£ã®æ¤œè¨¼

**æ¤œè¨¼é …ç›®**:
- [ ] 0ç‚¹åŠè˜ãŒã€Œç©ºãƒãƒ³ãƒãƒ£ãƒ³ã€ã¨ã—ã¦é™¤å¤–ã•ã‚Œãªã„
- [ ] 0ç‚¹åŠè˜ãŒçµ±è¨ˆã«å«ã¾ã‚Œã‚‹
- [ ] ç·åˆé †ä½ãŒæ­£ã—ã„ï¼ˆãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ = 4ä½ï¼‰
- [ ] **rankStatsï¼ˆç€é †çµ±è¨ˆï¼‰ãŒæ­£ã—ãè¨ˆç®—ã•ã‚Œã‚‹** âš ï¸ analysis.ts Line 130ã®æ¤œè¨¼
- [ ] **0ç‚¹ã§ã‚‚rankStatsã«å«ã¾ã‚Œã‚‹** âš ï¸ analysis.ts Line 142ã®æ¤œè¨¼

---

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: è¤‡æ•°åŠè˜ãƒ»0ç‚¹ã‚’å«ã‚€

**ãƒ†ã‚¹ãƒˆID**: EDGE-002

**ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿**:
```
ã‚»ãƒƒã‚·ãƒ§ãƒ³:
  æ—¥ä»˜: 2025-11-05
  ãƒ¢ãƒ¼ãƒ‰: 4äººæ‰“ã¡

åŠè˜1:
  ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼: +10000ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B: Â±0ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C: -5000ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D: -5000ç‚¹

åŠè˜2:
  ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼: Â±0ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B: +5000ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C: +2500ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D: -7500ç‚¹

åŠè˜3:
  ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼: -10000ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B: Â±0ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C: +5000ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D: +5000ç‚¹
```

**æ“ä½œæ‰‹é †**:
1. æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ä¸Šè¨˜ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›
2. ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¿å­˜
3. å±¥æ­´ã‚¿ãƒ–ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³è©³ç´°ã‚’é–‹ã
4. åˆ†æã‚¿ãƒ–ã§å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠ

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:

**å±¥æ­´ã‚¿ãƒ–ï¼ˆãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰**:
- [ ] åŠè˜æ•°: 3åŠè˜ï¼ˆ0ç‚¹åŠè˜ã‚’å«ã‚€ï¼‰
- [ ] åæ”¯: (10000 + 0 - 10000) * 30 - 500 = -500pt
- [ ] ç€é †ã‚«ã‚¦ãƒ³ãƒˆ: 1ä½1å›ã€4ä½2å›

**åˆ†æã‚¿ãƒ–ï¼ˆãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰**:
- [ ] revenueStats.totalBalance: -500pt
- [ ] pointStats.pointBalance: 0ç‚¹
- [ ] **rankStats.hanchanCount: 3ï¼ˆ0ç‚¹åŠè˜ã‚’å«ã‚€ï¼‰** âš ï¸ analysis.ts Line 130, 142ã®æ¤œè¨¼
- [ ] **rankStats.averageRank: (1 + 4 + 4) / 3 = 3.00ä½** âš ï¸ 0ç‚¹åŠè˜ãŒå¹³å‡ç€é †ã«å«ã¾ã‚Œã‚‹

**åˆ†æã‚¿ãƒ–ï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼Bï¼‰**:
- [ ] **rankStats.hanchanCount: 3ï¼ˆ0ç‚¹åŠè˜Ã—2ã‚’å«ã‚€ï¼‰** âš ï¸ é‡è¦ãªæ¤œè¨¼ãƒã‚¤ãƒ³ãƒˆ
- [ ] pointStats.pointBalance: 0ç‚¹ + 5000ç‚¹ + 0ç‚¹ = 5000ç‚¹

**æ¤œè¨¼é …ç›®**:
- [ ] è¤‡æ•°ã®0ç‚¹åŠè˜ãŒçµ±è¨ˆã«å«ã¾ã‚Œã‚‹
- [ ] å¹³å‡ç€é †ã®è¨ˆç®—ã«0ç‚¹åŠè˜ãŒå«ã¾ã‚Œã‚‹
- [ ] ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§0ç‚¹åŠè˜ãŒèªè­˜ã•ã‚Œã‚‹
- [ ] **`calculateRankStatistics`ãŒ0ç‚¹åŠè˜ã‚’æ­£ã—ãå‡¦ç†** âš ï¸ analysis.tsä¿®æ­£ã®æ ¸å¿ƒ

---

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: å…¨å“¡0ç‚¹ã®åŠè˜ï¼ˆæ¥µç«¯ãªã‚±ãƒ¼ã‚¹ï¼‰

**ãƒ†ã‚¹ãƒˆID**: EDGE-003

**ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿**:
```
ã‚»ãƒƒã‚·ãƒ§ãƒ³:
  æ—¥ä»˜: 2025-11-05
  ãƒ¢ãƒ¼ãƒ‰: 4äººæ‰“ã¡

åŠè˜1:
  ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼: Â±0ç‚¹, ã‚¦ãƒ: ""
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B: Â±0ç‚¹, ã‚¦ãƒ: ""
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C: Â±0ç‚¹, ã‚¦ãƒ: ""
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D: Â±0ç‚¹, ã‚¦ãƒ: ""
```

**æ“ä½œæ‰‹é †**:
1. æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ä¸Šè¨˜ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›
2. ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¿å­˜

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:

**InputTabï¼ˆä¿å­˜å‰ï¼‰**:
- [ ] ã€Œç‚¹æ•°ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€ã‚¨ãƒ©ãƒ¼ãŒ**å‡ºãªã„**
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæ­£å¸¸ã«ä¿å­˜ã•ã‚Œã‚‹

**å±¥æ­´ã‚¿ãƒ–**:
- [ ] åŠè˜æ•°: 1åŠè˜
- [ ] ã™ã¹ã¦ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®åæ”¯: -500ptï¼ˆå ´ä»£ã®ã¿ï¼‰

**åˆ†æã‚¿ãƒ–**:
- [ ] **å…¨å“¡ã®åŠè˜æ•°: 1** âš ï¸ analysis.ts Line 130ã®æœ€é‡è¦ãƒ†ã‚¹ãƒˆ
- [ ] å…¨å“¡ã®pointBalance: 0ç‚¹
- [ ] **rankStatsãŒæ­£å¸¸ã«è¡¨ç¤ºã•ã‚Œã‚‹** âš ï¸ å…¨å“¡0ç‚¹ã§ã‚‚ã€Œç©ºåŠè˜ã€æ‰±ã„ã—ãªã„

**æ¤œè¨¼é …ç›®**:
- [ ] å…¨å“¡0ç‚¹ã®åŠè˜ãŒã€Œç©ºãƒãƒ³ãƒãƒ£ãƒ³ã€ã¨ã—ã¦é™¤å¤–ã•ã‚Œãªã„
- [ ] ä¿å­˜ãŒæ­£å¸¸ã«å®Œäº†ã™ã‚‹
- [ ] çµ±è¨ˆã«æ­£ã—ãåæ˜ ã•ã‚Œã‚‹

---

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹4: 0ç‚¹ã¨æœªå…¥åŠ›ï¼ˆnullï¼‰ã®é•ã„

**ãƒ†ã‚¹ãƒˆID**: EDGE-004

**ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿**:
```
ã‚»ãƒƒã‚·ãƒ§ãƒ³:
  æ—¥ä»˜: 2025-11-05
  ãƒ¢ãƒ¼ãƒ‰: 4äººæ‰“ã¡

åŠè˜1:
  ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼: +10000ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B: Â±0ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C: -5000ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D: -5000ç‚¹

åŠè˜2:
  ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼: nullï¼ˆæœªå…¥åŠ›ï¼‰
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B: nullï¼ˆæœªå…¥åŠ›ï¼‰
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C: nullï¼ˆæœªå…¥åŠ›ï¼‰
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D: nullï¼ˆæœªå…¥åŠ›ï¼‰

åŠè˜3:
  ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼: -5000ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B: Â±0ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C: +2500ç‚¹
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D: +2500ç‚¹
```

**æ“ä½œæ‰‹é †**:
1. æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ä¸Šè¨˜ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›
2. ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¿å­˜
3. å±¥æ­´ã‚¿ãƒ–ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³è©³ç´°ã‚’é–‹ã

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:

**InputTabï¼ˆä¿å­˜å‰ï¼‰**:
- [ ] åŠè˜2ãŒã€Œç©ºãƒãƒ³ãƒãƒ£ãƒ³ã€ã¨ã—ã¦é™¤å¤–ã•ã‚Œã‚‹
- [ ] ä¿å­˜ã•ã‚Œã‚‹ã®ã¯åŠè˜1ã¨åŠè˜3ã®ã¿

**å±¥æ­´ã‚¿ãƒ–**:
- [ ] åŠè˜æ•°: 2åŠè˜ï¼ˆåŠè˜2ã¯é™¤å¤–ï¼‰
- [ ] åŠè˜ç•ªå·: 1, 2ï¼ˆå…ƒã®3ãŒ2ã«æŒ¯ã‚Šç›´ã•ã‚Œã‚‹ï¼‰

**åˆ†æã‚¿ãƒ–ï¼ˆãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰**:
- [ ] rankStats.hanchanCount: 2ï¼ˆ0ç‚¹åŠè˜1ã‚’å«ã‚€ï¼‰
- [ ] pointStats: åŠè˜1ã¨åŠè˜3ã®ã¿

**æ¤œè¨¼é …ç›®**:
- [ ] `null`ï¼ˆæœªå…¥åŠ›ï¼‰ã¯é™¤å¤–ã•ã‚Œã‚‹
- [ ] `0`ï¼ˆÂ±0ç‚¹ï¼‰ã¯å«ã¾ã‚Œã‚‹
- [ ] åŠè˜ç•ªå·ãŒæ­£ã—ãæŒ¯ã‚Šç›´ã•ã‚Œã‚‹

---

## Phase 2: selectedUserIdãƒ†ã‚¹ãƒˆ

### ãƒ†ã‚¹ãƒˆç›®çš„

selectedUserIdã«ã‚ˆã‚‹å‹•çš„ãªçµ±è¨ˆè¨ˆç®—ã‚’æ¤œè¨¼

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹5: ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ‡ã‚Šæ›¿ãˆåŸºæœ¬å‹•ä½œ

**ãƒ†ã‚¹ãƒˆID**: USERID-001

**å‰ææ¡ä»¶**:
- ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼: "ãƒ¡ã‚¤ãƒ³"
- ç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼: "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B", "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C", "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D"

**ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿**:
```
ã‚»ãƒƒã‚·ãƒ§ãƒ³:
  æ—¥ä»˜: 2025-11-05
  ãƒ¢ãƒ¼ãƒ‰: 4äººæ‰“ã¡
  ãƒ¬ãƒ¼ãƒˆ: 30pt
  ã‚¦ãƒ: 10pt/å€‹
  ãƒãƒƒãƒ—ãƒ¬ãƒ¼ãƒˆ: 100pt/æš
  å ´ä»£: 500pt

åŠè˜1:
  ãƒ¡ã‚¤ãƒ³: +10000ç‚¹, ã‚¦ãƒ: "â—‹â—‹â—‹", ãƒãƒƒãƒ—: +5æš
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B: +5000ç‚¹, ã‚¦ãƒ: "â—‹â—‹", ãƒãƒƒãƒ—: +3æš
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C: -7500ç‚¹, ã‚¦ãƒ: "â—‹", ãƒãƒƒãƒ—: -4æš
  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D: -7500ç‚¹, ã‚¦ãƒ: "âœ—", ãƒãƒƒãƒ—: -4æš
```

**æ“ä½œæ‰‹é †**:
1. æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ä¸Šè¨˜ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›
2. ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¿å­˜
3. åˆ†æã‚¿ãƒ–ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’åˆ‡ã‚Šæ›¿ãˆ

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:

**ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠæ™‚**:
- [ ] revenueStats:
  - å°è¨ˆ: 10000 + 30 * 10 = 10300ç‚¹
  - scorePayout: 10300 * 30 = 309000pt
  - chipsPayout: 5 * 100 = 500pt
  - parlorFee: -500pt
  - totalBalance: 309000 + 500 - 500 = 309000pt
- [ ] chipStats.chipBalance: +5æš
- [ ] pointStats.pointBalance: 10300ç‚¹

**ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼Bé¸æŠæ™‚**:
- [ ] revenueStats:
  - å°è¨ˆ: 5000 + 20 * 10 = 5200ç‚¹
  - scorePayout: 5200 * 30 = 156000pt
  - chipsPayout: 3 * 100 = 300pt
  - parlorFee: -500pt
  - totalBalance: 156000 + 300 - 500 = 155800pt
- [ ] chipStats.chipBalance: +3æš
- [ ] pointStats.pointBalance: 5200ç‚¹

**ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼Cé¸æŠæ™‚**:
- [ ] revenueStats:
  - å°è¨ˆ: -7500 + 10 * 10 = -7400ç‚¹
  - scorePayout: -7400 * 30 = -222000pt
  - chipsPayout: -4 * 100 = -400pt
  - parlorFee: -500pt
  - totalBalance: -222000 - 400 - 500 = -222900pt
- [ ] chipStats.chipBalance: -4æš
- [ ] pointStats.pointBalance: -7400ç‚¹

**æ¤œè¨¼é …ç›®**:
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ‡ã‚Šæ›¿ãˆã§å³åº§ã«çµ±è¨ˆãŒæ›´æ–°ã•ã‚Œã‚‹
- [ ] å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§çµ±è¨ˆãŒç•°ãªã‚‹
- [ ] chips/parlorFeeãŒæ­£ã—ãåŠ ç®—ã•ã‚Œã‚‹

---

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹6: è¤‡æ•°ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»chips/parlorFeeã‚«ã‚¦ãƒ³ãƒˆ

**ãƒ†ã‚¹ãƒˆID**: USERID-002

**ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿**:
```
ã‚»ãƒƒã‚·ãƒ§ãƒ³1:
  æ—¥ä»˜: 2025-11-05
  åŠè˜1: ãƒ¡ã‚¤ãƒ³+10000, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B+5000, ãƒãƒƒãƒ—å„è‡ª+5æš
  åŠè˜2: ãƒ¡ã‚¤ãƒ³-5000, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B-3000

ã‚»ãƒƒã‚·ãƒ§ãƒ³2:
  æ—¥ä»˜: 2025-11-06
  åŠè˜1: ãƒ¡ã‚¤ãƒ³+8000, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B+6000, ãƒãƒƒãƒ—å„è‡ª+3æš
  åŠè˜2: ãƒ¡ã‚¤ãƒ³-4000, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B-2000
```

**æ“ä½œæ‰‹é †**:
1. ã‚»ãƒƒã‚·ãƒ§ãƒ³1ã‚’ä¿å­˜
2. ã‚»ãƒƒã‚·ãƒ§ãƒ³2ã‚’ä¿å­˜
3. åˆ†æã‚¿ãƒ–ã§ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠ
4. åˆ†æã‚¿ãƒ–ã§ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼Bã‚’é¸æŠ

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:

**ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠæ™‚**:
- [ ] chipStats.chipBalance: +8æšï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³1: +5æšã€ã‚»ãƒƒã‚·ãƒ§ãƒ³2: +3æšï¼‰
- [ ] revenueStats: å„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§å ´ä»£ãŒ1å›ã®ã¿å¼•ã‹ã‚Œã‚‹
- [ ] pointStats: å…¨4åŠè˜ã®åˆè¨ˆ

**ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼Bé¸æŠæ™‚**:
- [ ] chipStats.chipBalance: +8æšï¼ˆåŒä¸Šï¼‰
- [ ] revenueStats: å„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§å ´ä»£ãŒ1å›ã®ã¿å¼•ã‹ã‚Œã‚‹
- [ ] pointStats: å…¨4åŠè˜ã®åˆè¨ˆ

**æ¤œè¨¼é …ç›®**:
- [ ] chips/parlorFeeãŒã‚»ãƒƒã‚·ãƒ§ãƒ³å˜ä½ã§1å›ã®ã¿ã‚«ã‚¦ãƒ³ãƒˆ
- [ ] è¤‡æ•°ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§æ­£ã—ãç´¯ç©ã•ã‚Œã‚‹
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã£ã¦çµæœãŒç•°ãªã‚‹

---

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹7: 0ç‚¹ã¨selectedUserIdåˆ‡ã‚Šæ›¿ãˆ

**ãƒ†ã‚¹ãƒˆID**: USERID-003

**ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿**:
```
ã‚»ãƒƒã‚·ãƒ§ãƒ³:
  æ—¥ä»˜: 2025-11-05
  åŠè˜1: ãƒ¡ã‚¤ãƒ³+5000, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼BÂ±0, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C-2500, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D-2500
  åŠè˜2: ãƒ¡ã‚¤ãƒ³Â±0, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼B+5000, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C-2500, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D-2500
  åŠè˜3: ãƒ¡ã‚¤ãƒ³-5000, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼BÂ±0, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼C+2500, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼D+2500
```

**æ“ä½œæ‰‹é †**:
1. ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¿å­˜
2. åˆ†æã‚¿ãƒ–ã§ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’é¸æŠ
3. åˆ†æã‚¿ãƒ–ã§ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼Bã‚’é¸æŠ

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:

**ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠæ™‚**:
- [ ] rankStats.hanchanCount: 3ï¼ˆ0ç‚¹åŠè˜ã‚’å«ã‚€ï¼‰
- [ ] pointStats.pointBalance: 0ç‚¹
- [ ] åŠè˜2ï¼ˆÂ±0ç‚¹ï¼‰ãŒçµ±è¨ˆã«å«ã¾ã‚Œã‚‹

**ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼Bé¸æŠæ™‚**:
- [ ] rankStats.hanchanCount: 3ï¼ˆ0ç‚¹åŠè˜Ã—2ã‚’å«ã‚€ï¼‰
- [ ] pointStats.pointBalance: 5000ç‚¹
- [ ] åŠè˜1ã¨åŠè˜3ï¼ˆÂ±0ç‚¹Ã—2ï¼‰ãŒçµ±è¨ˆã«å«ã¾ã‚Œã‚‹

**æ¤œè¨¼é …ç›®**:
- [ ] 0ç‚¹åŠè˜ãŒselectedUserIdåˆ‡ã‚Šæ›¿ãˆã§æ­£ã—ãå‡¦ç†ã•ã‚Œã‚‹
- [ ] å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§0ç‚¹åŠè˜ãŒé©åˆ‡ã«é›†è¨ˆã•ã‚Œã‚‹

---

## å›å¸°ãƒ†ã‚¹ãƒˆ

### ç›®çš„

æ—¢å­˜æ©Ÿèƒ½ãŒæ­£ã—ãå‹•ä½œã—ç¶šã‘ã‚‹ã“ã¨ã‚’ç¢ºèª

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹8: å±¥æ­´ã‚¿ãƒ–è¡¨ç¤º

**ãƒ†ã‚¹ãƒˆID**: REGRESS-001

**å‰ææ¡ä»¶**:
- è¤‡æ•°ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒä¿å­˜æ¸ˆã¿

**æ“ä½œæ‰‹é †**:
1. å±¥æ­´ã‚¿ãƒ–ã‚’é–‹ã
2. å„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®è©³ç´°ã‚’ç¢ºèª

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å‰Šé™¤æ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹
- [ ] ã‚µãƒãƒªãƒ¼æƒ…å ±ãŒæ­£ã—ã„ï¼ˆsession.summaryä½¿ç”¨ï¼‰

**æ¤œè¨¼é …ç›®**:
- [ ] Phase 1/2ã®ä¿®æ­£ãŒå±¥æ­´ã‚¿ãƒ–ã«å½±éŸ¿ã—ãªã„
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒä½ä¸‹ã—ã¦ã„ãªã„

---

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹9: å…¥åŠ›ã‚¿ãƒ–ä¿å­˜

**ãƒ†ã‚¹ãƒˆID**: REGRESS-002

**æ“ä½œæ‰‹é †**:
1. æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å…¥åŠ›
2. ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¿å­˜
3. å±¥æ­´ã‚¿ãƒ–ã§ç¢ºèª

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæ­£å¸¸ã«ä¿å­˜ã•ã‚Œã‚‹
- [ ] ã‚µãƒãƒªãƒ¼ãŒäº‹å‰è¨ˆç®—ã•ã‚Œã‚‹ï¼ˆsession.summaryï¼‰
- [ ] åŠè˜ç•ªå·ãŒæ­£ã—ãæŒ¯ã‚‰ã‚Œã‚‹

**æ¤œè¨¼é …ç›®**:
- [ ] Phase 1ã®ä¿®æ­£ãŒä¿å­˜å‡¦ç†ã«å½±éŸ¿ã—ãªã„
- [ ] ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„

---

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹10: åˆ†æã‚¿ãƒ–åŸºæœ¬æ©Ÿèƒ½

**ãƒ†ã‚¹ãƒˆID**: REGRESS-003

**æ“ä½œæ‰‹é †**:
1. åˆ†æã‚¿ãƒ–ã‚’é–‹ã
2. å„ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’æ“ä½œ
   - æœŸé–“ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
   - ãƒ¢ãƒ¼ãƒ‰ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
- [ ] ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] çµ±è¨ˆãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè¨±å®¹ç¯„å›²å†…

**æ¤œè¨¼é …ç›®**:
- [ ] Phase 2ã®ä¿®æ­£ãŒä»–ã®çµ±è¨ˆã«å½±éŸ¿ã—ãªã„
- [ ] UIãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

### ç›®çš„

Phase 2ã®å®Ÿè£…ã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹ãŒãªã„ã“ã¨ã‚’ç¢ºèª

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹11: å¤§é‡ãƒ‡ãƒ¼ã‚¿ã§ã®çµ±è¨ˆè¨ˆç®—

**ãƒ†ã‚¹ãƒˆID**: PERF-001

**ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿**:
- ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°: 100
- å¹³å‡åŠè˜æ•°: 5
- ç·åŠè˜æ•°: 500

**æ“ä½œæ‰‹é †**:
1. 100ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä½œæˆï¼ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆä½¿ç”¨ï¼‰
2. åˆ†æã‚¿ãƒ–ã‚’é–‹ã
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’åˆ‡ã‚Šæ›¿ãˆ
4. è¨ˆç®—æ™‚é–“ã‚’æ¸¬å®š

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
- [ ] åˆå›è¡¨ç¤º: 50msä»¥ä¸‹
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ‡ã‚Šæ›¿ãˆ: 50msä»¥ä¸‹ï¼ˆuseMemoã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
- [ ] UIã®å¿œç­”æ€§ãŒè‰¯å¥½

**æ¤œè¨¼é …ç›®**:
- [ ] Phase 2å®Ÿè£…ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹ãŒãªã„
- [ ] useMemoãŒæ­£ã—ãå‹•ä½œã—ã¦ã„ã‚‹

---

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹12: ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡

**ãƒ†ã‚¹ãƒˆID**: PERF-002

**æ“ä½œæ‰‹é †**:
1. é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’ç›£è¦–
2. åˆ†æã‚¿ãƒ–ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’åˆ‡ã‚Šæ›¿ãˆï¼ˆ100å›ï¼‰
3. ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒãªã„ã“ã¨ã‚’ç¢ºèª

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
- [ ] ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒå®‰å®š
- [ ] ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒãªã„
- [ ] ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸

**æ¤œè¨¼é …ç›®**:
- [ ] useMemoã«ã‚ˆã‚‹ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒãªã„
- [ ] å¤§é‡ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ‡ã‚Šæ›¿ãˆã§å•é¡ŒãŒç™ºç”Ÿã—ãªã„

---

## ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãƒãƒˆãƒªãƒƒã‚¯ã‚¹

### Phase 1: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ

| Test ID | åå‰ | å„ªå…ˆåº¦ | è‡ªå‹•åŒ– | æ‰€è¦æ™‚é–“ |
|---------|------|--------|--------|---------|
| EDGE-001 | å˜ä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»0ç‚¹åŠè˜ | ğŸ”´ Critical | E2Eå¯èƒ½ | 5åˆ† |
| EDGE-002 | è¤‡æ•°åŠè˜ãƒ»0ç‚¹ã‚’å«ã‚€ | ğŸ”´ Critical | E2Eå¯èƒ½ | 10åˆ† |
| EDGE-003 | å…¨å“¡0ç‚¹ã®åŠè˜ | ğŸŸ¡ High | E2Eå¯èƒ½ | 5åˆ† |
| EDGE-004 | 0ç‚¹ã¨æœªå…¥åŠ›ã®é•ã„ | ğŸ”´ Critical | E2Eå¯èƒ½ | 10åˆ† |

**åˆè¨ˆæ™‚é–“**: 30åˆ†

### Phase 2: selectedUserIdãƒ†ã‚¹ãƒˆ

| Test ID | åå‰ | å„ªå…ˆåº¦ | è‡ªå‹•åŒ– | æ‰€è¦æ™‚é–“ |
|---------|------|--------|--------|---------|
| USERID-001 | ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ‡ã‚Šæ›¿ãˆåŸºæœ¬å‹•ä½œ | ğŸ”´ Critical | E2Eå¯èƒ½ | 10åˆ† |
| USERID-002 | è¤‡æ•°ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»chips/parlorFee | ğŸ”´ Critical | E2Eå¯èƒ½ | 15åˆ† |
| USERID-003 | 0ç‚¹ã¨selectedUserIdåˆ‡ã‚Šæ›¿ãˆ | ğŸŸ¡ High | E2Eå¯èƒ½ | 10åˆ† |

**åˆè¨ˆæ™‚é–“**: 35åˆ†

### å›å¸°ãƒ†ã‚¹ãƒˆ

| Test ID | åå‰ | å„ªå…ˆåº¦ | è‡ªå‹•åŒ– | æ‰€è¦æ™‚é–“ |
|---------|------|--------|--------|---------|
| REGRESS-001 | å±¥æ­´ã‚¿ãƒ–è¡¨ç¤º | ğŸ”´ Critical | E2Eå¯èƒ½ | 5åˆ† |
| REGRESS-002 | å…¥åŠ›ã‚¿ãƒ–ä¿å­˜ | ğŸ”´ Critical | E2Eå¯èƒ½ | 5åˆ† |
| REGRESS-003 | åˆ†æã‚¿ãƒ–åŸºæœ¬æ©Ÿèƒ½ | ğŸŸ¡ High | E2Eå¯èƒ½ | 10åˆ† |

**åˆè¨ˆæ™‚é–“**: 20åˆ†

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

| Test ID | åå‰ | å„ªå…ˆåº¦ | è‡ªå‹•åŒ– | æ‰€è¦æ™‚é–“ |
|---------|------|--------|--------|---------|
| PERF-001 | å¤§é‡ãƒ‡ãƒ¼ã‚¿ã§ã®çµ±è¨ˆè¨ˆç®— | ğŸŸ¡ High | æ‰‹å‹• | 15åˆ† |
| PERF-002 | ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | ğŸŸ¢ Medium | æ‰‹å‹• | 10åˆ† |

**åˆè¨ˆæ™‚é–“**: 25åˆ†

### ãƒ†ã‚¹ãƒˆå…¨ä½“ã‚µãƒãƒªãƒ¼

| ãƒ•ã‚§ãƒ¼ã‚º | ãƒ†ã‚¹ãƒˆæ•° | åˆè¨ˆæ™‚é–“ | è‡ªå‹•åŒ–å¯èƒ½ |
|---------|---------|---------|-----------|
| Phase 1 | 4 | 30åˆ† | 4/4 |
| Phase 2 | 3 | 35åˆ† | 3/3 |
| å›å¸° | 3 | 20åˆ† | 3/3 |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | 2 | 25åˆ† | 0/2 |
| **åˆè¨ˆ** | **12** | **110åˆ†** | **10/12** |

---

## ãƒ†ã‚¹ãƒˆå®Ÿæ–½è¨ˆç”»

### Phase 1å®Œäº†å¾Œ

**å¿…é ˆãƒ†ã‚¹ãƒˆ**:
1. EDGE-001: å˜ä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»0ç‚¹åŠè˜
2. EDGE-002: è¤‡æ•°åŠè˜ãƒ»0ç‚¹ã‚’å«ã‚€
3. EDGE-004: 0ç‚¹ã¨æœªå…¥åŠ›ã®é•ã„
4. REGRESS-001: å±¥æ­´ã‚¿ãƒ–è¡¨ç¤ºï¼ˆå›å¸°ç¢ºèªï¼‰

**æ‰€è¦æ™‚é–“**: 30åˆ†

### Phase 2å®Œäº†å¾Œ

**å¿…é ˆãƒ†ã‚¹ãƒˆ**:
1. USERID-001: ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ‡ã‚Šæ›¿ãˆåŸºæœ¬å‹•ä½œ
2. USERID-002: è¤‡æ•°ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»chips/parlorFee
3. REGRESS-003: åˆ†æã‚¿ãƒ–åŸºæœ¬æ©Ÿèƒ½ï¼ˆå›å¸°ç¢ºèªï¼‰

**æ‰€è¦æ™‚é–“**: 35åˆ†

### æœ€çµ‚ç¢ºèª

**æ¨å¥¨ãƒ†ã‚¹ãƒˆ**:
1. EDGE-003: å…¨å“¡0ç‚¹ã®åŠè˜ï¼ˆæ¥µç«¯ãªã‚±ãƒ¼ã‚¹ï¼‰
2. USERID-003: 0ç‚¹ã¨selectedUserIdåˆ‡ã‚Šæ›¿ãˆ
3. PERF-001: å¤§é‡ãƒ‡ãƒ¼ã‚¿ã§ã®çµ±è¨ˆè¨ˆç®—
4. PERF-002: ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡

**æ‰€è¦æ™‚é–“**: 45åˆ†

---

## E2Eãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–æ¡ˆ

### Playwrightå®Ÿè£…ä¾‹

```typescript
// tests/analysis-tab-edge-cases.spec.ts

import { test, expect } from '@playwright/test'

test.describe('Phase 1: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ', () => {
  test('EDGE-001: å˜ä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»0ç‚¹åŠè˜', async ({ page }) => {
    await page.goto('/')

    // ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ
    await page.click('text=æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹')
    await page.click('text=4äººæ‰“ã¡éº»é›€')

    // ç‚¹æ•°å…¥åŠ›ï¼ˆãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼Â±0ç‚¹ï¼‰
    await page.fill('[data-testid="score-1-0"]', '0')
    await page.fill('[data-testid="score-1-1"]', '5000')
    await page.fill('[data-testid="score-1-2"]', '-2500')
    await page.fill('[data-testid="score-1-3"]', '-2500')

    // ä¿å­˜
    await page.click('[data-testid="save-session"]')
    await expect(page.locator('text=ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä¿å­˜ã—ã¾ã—ãŸ')).toBeVisible()

    // å±¥æ­´ã‚¿ãƒ–ç¢ºèª
    await page.click('[data-testid="tab-history"]')
    await expect(page.locator('text=1åŠè˜')).toBeVisible()

    // åˆ†æã‚¿ãƒ–ç¢ºèª
    await page.click('[data-testid="tab-analysis"]')
    await expect(page.locator('[data-testid="revenue-balance"]')).toContainText('-500pt')
  })

  test('EDGE-002: è¤‡æ•°åŠè˜ãƒ»0ç‚¹ã‚’å«ã‚€', async ({ page }) => {
    // ... å®Ÿè£…
  })
})

test.describe('Phase 2: selectedUserIdãƒ†ã‚¹ãƒˆ', () => {
  test('USERID-001: ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ‡ã‚Šæ›¿ãˆåŸºæœ¬å‹•ä½œ', async ({ page }) => {
    // ... ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ

    // åˆ†æã‚¿ãƒ–ã§ãƒ¡ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠ
    await page.click('[data-testid="tab-analysis"]')
    await page.selectOption('[data-testid="user-filter"]', 'main-user-fixed-id')
    await expect(page.locator('[data-testid="revenue-balance"]')).toContainText('309000pt')

    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼Bé¸æŠ
    await page.selectOption('[data-testid="user-filter"]', 'player-b-id')
    await expect(page.locator('[data-testid="revenue-balance"]')).toContainText('155800pt')
  })
})
```

---

## ã¾ã¨ã‚

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®ãƒã‚¤ãƒ³ãƒˆ

1. **Phase 1ï¼ˆã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ï¼‰**
   - 0ç‚¹ãŒæ­£ã—ãå‡¦ç†ã•ã‚Œã‚‹ã“ã¨ã‚’é‡ç‚¹çš„ã«æ¤œè¨¼
   - æœªå…¥åŠ›ï¼ˆnullï¼‰ã¨ã®é•ã„ã‚’æ˜ç¢ºåŒ–
   - **`calculateRankStatistics`ï¼ˆanalysis.tsï¼‰ã®å‹•ä½œç¢ºèª** âš ï¸ å¤–éƒ¨AIãƒ¬ãƒ“ãƒ¥ãƒ¼ã§è¿½åŠ 

2. **Phase 2ï¼ˆselectedUserIdï¼‰**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ‡ã‚Šæ›¿ãˆã§çµ±è¨ˆãŒæ›´æ–°ã•ã‚Œã‚‹ã“ã¨ã‚’æ¤œè¨¼
   - chips/parlorFeeã®1å›ã®ã¿ã‚«ã‚¦ãƒ³ãƒˆã‚’ç¢ºèª

3. **å›å¸°ãƒ†ã‚¹ãƒˆ**
   - æ—¢å­˜æ©Ÿèƒ½ãŒå½±éŸ¿ã‚’å—ã‘ã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèª
   - å±¥æ­´ã‚¿ãƒ–ãƒ»å…¥åŠ›ã‚¿ãƒ–ã®å‹•ä½œç¢ºèª

4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**
   - å¤§é‡ãƒ‡ãƒ¼ã‚¿ã§ã®å‹•ä½œç¢ºèª
   - ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒãªã„ã“ã¨ã‚’ç¢ºèª

### æ¨å¥¨å®Ÿæ–½é †åº

1. **Phase 1å®Ÿè£… â†’ Phase 1ãƒ†ã‚¹ãƒˆ**ï¼ˆ30åˆ†ï¼‰
2. **Phase 2å®Ÿè£… â†’ Phase 2ãƒ†ã‚¹ãƒˆ**ï¼ˆ35åˆ†ï¼‰
3. **å›å¸°ãƒ†ã‚¹ãƒˆ**ï¼ˆ20åˆ†ï¼‰
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**ï¼ˆ25åˆ†ï¼‰

**åˆè¨ˆæ‰€è¦æ™‚é–“**: ç´„2æ™‚é–“ï¼ˆå®Ÿè£…å«ã¾ãšï¼‰

---

**Document Version**: 1.1
**Last Updated**: 2025-11-06 (å¤–éƒ¨AIãƒ¬ãƒ“ãƒ¥ãƒ¼åæ˜ )
**Status**: Ready for Testing

**å¤‰æ›´å±¥æ­´**:
- v1.1 (2025-11-06): å¤–éƒ¨AIãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã‚ˆã‚Šanalysis.tsï¼ˆLine 130, 142ï¼‰ã®æ¤œè¨¼é …ç›®ã‚’è¿½åŠ ã€‚rankStatsé–¢é€£ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å¼·åŒ–ã€‚
- v1.0 (2025-11-05): åˆç‰ˆä½œæˆ
