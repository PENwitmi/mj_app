# 履歴タブの画面設計

**作成日**: 2025-10-03 01:24
**ステータス**: 設計完了

---

## 📱 履歴タブの役割

過去のセッション（日付ごと）の成績一覧を表示し、詳細を確認・編集できる画面。

---

## 🎯 基本設計思想

### 「自分」の特定方法
- **入力画面の左端（1列目）は必ず自分**
- これにより履歴でも自動的に自分の成績が追跡される
- プレイヤー名の管理が不要でシンプル

---

## 📋 一覧表示

### レイアウト

スクロール可能なカードリスト形式：

```
┌─────────────────────────────────────┐
│ 📅 2025-10-03                  3半荘│
│ 収支:+4200 | チップ:+1枚            │
│ 平均: 1.67位 | 1位:2回 2位:1回 3位:0回 4位:0回│
├─────────────────────────────────────┤
│ 📅 2025-10-02                  5半荘│
│ 収支:-2800 | チップ:-2枚            │
│ 平均: 2.80位 | 1位:1回 2位:2回 3位:1回 4位:1回│
├─────────────────────────────────────┤
│ 📅 2025-10-01                  2半荘│
│ 収支:+1500 | チップ:+3枚            │
│ 平均: 1.50位 | 1位:1回 2位:1回 3位:0回 4位:0回│
├─────────────────────────────────────┤
│ 📅 2025-09-30                  4半荘│
│ 収支:+800  | チップ:0枚             │
│ 平均: 2.25位 | 1位:1回 2位:2回 3位:1回 4位:0回│
└─────────────────────────────────────┘
```

### 各カードの表示内容

**1行目**:
- 📅 日付
- 半荘数（右寄せ）

**2行目**:
- 収支: 最終収支の合計（場代引き後）
- チップ: チップ枚数の合計

**3行目**:
- 平均着順: その日の平均順位
- 着順内訳: 1位○回、2位○回、3位○回、4位○回

---

## 🔍 詳細画面

### 表示内容

**カードをタップすると詳細画面へ遷移**

詳細画面は**入力画面と同じ表形式**を使用：

```
┌─────────────────────────────────────┐
│ 📅 2025-10-03           [編集ボタン] │ ← 編集オン/オフ切り替え
│ レート: 100  ウマ: 10  チップレート: 100  場代: 500円│
└─────────────────────────────────────┘

┌──────┬─────────┬─────────┬─────────┬─────────┐
│      │  自分   │   B     │   C     │   D     │
├──────┼─────────┼─────────┼─────────┼─────────┤
│ 1半荘│ +10 ○○ │  -5 ○  │ -20 ✗✗ │ +15 ✗  │
├──────┼─────────┼─────────┼─────────┼─────────┤
│ 2半荘│  +5 ○  │ +10 ○○ │ -10 ✗  │  -5 ✗✗ │
├──────┼─────────┼─────────┼─────────┼─────────┤
│ 3半荘│ +20 ○○ │ -10 ✗  │  +5 ○  │ -15 ✗✗ │
├══════╪═════════╪═════════╪═════════╪═════════┤
│小計  │+45      │+25      │-60      │-10      │
│      │(+15+30) │(+5+20)  │(-30-30) │(+10-20) │
│チップ│   +2    │   -1    │    0    │   -1    │
│収支  │ +4700   │ +2400   │ -6000   │ -1100   │
│場代  │  -500   │  -500   │  -500   │  -500   │
│━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━│
│最終  │ +4200   │ +1900   │ -6500   │ -1600   │
└──────┴─────────┴─────────┴─────────┴─────────┘
```

---

## ✏️ 編集機能

### 編集ボタン
- **配置**: 画面上部（日付の横など）
- **状態**:
  - **オフ（デフォルト）**: 閲覧専用モード
    - すべてのフィールドがタップ無効
    - 誤操作防止
  - **オン**: 編集モード
    - すべてのフィールドが編集可能
    - 点数、ウママーク、チップ、設定値すべて変更可能

### 編集可能な項目
- 日付、レート、ウマ価値、チップレート、場代
- 各半荘の点数・ウママーク
- チップ枚数
- プレイヤー名

### 保存・キャンセル
- **保存**: 編集内容を確定
- **キャンセル**: 編集内容を破棄して閲覧モードに戻る

---

## 🎨 UI/UX 要件

### 一覧表示
- **新しい順**: 最新のセッションが上
- **スクロール**: 過去の履歴を遡れる
- **タップ**: カード全体がタップ可能
- **視認性**: 収支のプラス/マイナスで色分け（+青、-赤など）

### 詳細表示
- **一貫性**: 入力画面と同じレイアウト
- **編集防止**: デフォルトで閲覧専用
- **編集モード**: 明示的なボタン操作が必要

---

## 🚀 次のステップ

1. 成績分析タブの設計
2. データモデル設計（Dexie.js）
3. コンポーネント実装開始

---

**更新履歴**:
- 2025-10-03 01:24: 初回作成、履歴タブの画面設計完了
