# 麻雀アプリ - 初回ディスカッション記録

**日時**: 2025-10-03 00:19
**参加者**: nishimototakashi
**目的**: 麻雀点数計算アプリの基本構想

---

## 話し合った内容（そのまま記録）

### 基本方針
- iOSで自分だけで使えたらいい
- Xcodeを経由させてCapacitorで作っていく
- **技術スタック（確定）**:
  - Vite + React + TypeScript
  - Tailwind CSS
  - **shadcn/ui** - UIコンポーネント
  - **IndexedDB（Dexie.js）** - データ保存
  - 理由: Next.jsの場合Capacitorでアプリ化することが難しい
  - templatesディレクトリ（Next.js）をコピーしたが、実際にはVite + Reactで作る
- **後で決める**:
  - 状態管理（Context API、Zustand等）
  - ルーティング（React Router等）
  - 全体的な仕様設計が決まってから相談

### 必要な機能（ユーザーが語った内容）

**点数入力と集計**
- 点数を入力して集計を取る
- 日付を入れて、その日付のデータの中に複数半荘分の麻雀の記録がある
- それらの合計が出る

**点数の入力形式**
- 基本的には「何点」ではなく「プラス〜〜」というような集計をすることが多い
- その数字（±形式）を入力してもらう
- **具体例**: 25000点スタート、3万返し（原点）で、4万点で終わった場合は「+10」と記録
  - 計算式: (終了点数 - 30000) / 1000
- 表形式で縦にどんどん記録していく方式が望ましい
- 1日に何半荘も回すことが多いので、入力はできるだけ簡潔に

**レート計算**
- 事前に設定したレートを掛け算することで総計の集計計算結果も出せるようにしたい

**馬の入力**
- 馬についても入力することがある
- 馬を設定して、馬がいくらついているのかをボタンで入力できるような感じがいい
- 馬は「〇×」のマークで表現することが多い
- **4人打ちの例**（一位から順に）：
  - 1位: ○○
  - 2位: ○
  - 3位: ✗
  - 4位: ✗✗
- マークは最大3個まで付く可能性がある
  - 例：○○○、無印、✗、✗✗など
- このマークを後で計算に組み込む
- **○1個の価値**: 状況によって変わるので、レート同様に日ごとに設定できるようにする

**人数構成の柔軟性**
- 3人打ちの場合と4人打ちの場合がそれぞれ考えられる
- 3人打ちを4人でやって回し打ちをしたりするなど様々な人数の構成が考えられる
- そのあたりは柔軟に設定できるようにしておく必要がある

**記録管理**
- このアプリの持ち主が自分自身に設定しているものについては、自分を永遠に集計し続けて自分自身の麻雀記録としても機能するようにしたい
- もしくは他の人も含めてユーザー記録を残す形にして、毎回名前にゲストもしくは記録されているユーザーを選ぶという形で記録を進めていくというのもあり

---

### 表形式の入力レイアウト

**4人打ちの例**:
- **横方向**: 4人の名前が並ぶ
- **縦方向**: 1半荘目、2半荘目、3半荘目...と点数が並ぶ
- **馬マークの配置**: 各点数の右側に馬のマークがつく

**馬マーク入力方法**:
- ○、○○、○○○、✗、✗✗、✗✗✗を1プッシュで選択できるようにする
- マークの個数で表現する

**馬マークの自動割り振り**:
- 点数を入力した時点で、馬マークが一定のルールに基づき自動的に割り振られる
- ルールの詳細は後ほど決定
- 自動割り振り後も、手動で編集可能にする（状況によって柔軟に対応するため）

**表示例**:
```
        プレイヤーA  | プレイヤーB  | プレイヤーC  | プレイヤーD
1半荘目  +10 ○○    | +5 ○       | -8 ✗       | -7 ✗✗
2半荘目  -3 ✗      | +12 ○○     | +8 ○       | -17 ✗✗
```

---

## 未決定事項・検討が必要なこと

- データ構造（どう保存するか）
- 馬マークの自動割り振りルール（後ほど決定）
- 3人打ちの馬のマーク付け方
- 状態管理・データベースの選定
- 実装の優先順位

---

## 次のステップ

これらの内容を踏まえて、一緒に設計を進めていく。

---

**更新履歴**:
- 2025-10-03 00:19: 初回記録、点数入力形式の詳細追加（+10表記、表形式入力）
- 2025-10-03 00:21: 馬の○×マーク表記の詳細追加
- 2025-10-03 00:22: 馬の価値を日ごとに設定可能にする仕様追加
- 2025-10-03 00:23: 表形式レイアウト詳細追加（横：名前、縦：半荘、馬マーク入力方法）
- 2025-10-03 00:24: 馬マーク表現方法を訂正（マークの個数で表現）
- 2025-10-03 00:25: 馬マークの自動割り振り仕様追加（ルールベース、手動編集可能）
- 2025-10-03 00:26: 技術スタック変更（Next.js → Vite + React、Capacitor対応のため）
- 2025-10-03 00:29: 技術選定整理（TypeScript、Tailwind確定、データ保存等は後で決定）
- 2025-10-03 00:35: データ保存方法確定（IndexedDB with Dexie.js）
- 2025-10-03 00:39: UIライブラリ確定（shadcn/ui）
